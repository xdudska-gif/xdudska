<!-- ===== 인트로 오버레이 : 캔버스 네온라인 + 파동 블롭 ===== -->
<div id="intro" class="intro-overlay" role="dialog" aria-label="Intro">
  <canvas id="motionCanvas"></canvas>

  <div class="intro-content">
    <h1 class="intro-title">YoungNam Portfolio</h1>
    <button id="enterBtn" class="intro-btn" type="button">둘러보기</button>
  </div>
</div>

<style>
.intro-overlay{
  position:fixed; inset:0; z-index:9999; overflow:hidden;
  display:flex; align-items:center; justify-content:center;
  background:#000; transition:opacity .6s ease, visibility .6s ease;
}
.intro-overlay.hidden{ opacity:0; visibility:hidden; }

#motionCanvas{ position:absolute; inset:0; width:100%; height:100%; display:block; }

.intro-content{ position:relative; z-index:10; text-align:center; color:#fff; }
.intro-title{
  font-family:"Playfair Display",serif; font-weight:700; font-size:56px; margin:0 0 24px;
  text-shadow:0 2px 12px rgba(0,0,0,.55), 0 0 40px rgba(124,77,255,.45);
  letter-spacing:.2px;
}
.intro-btn{
  background:rgba(255,255,255,.18); color:#fff; border:1px solid rgba(255,255,255,.45);
  padding:12px 28px; border-radius:999px; font-size:18px; cursor:pointer;
  backdrop-filter:blur(6px); transition:transform .2s ease, background .2s ease, box-shadow .2s;
  box-shadow: 0 6px 24px rgba(124,77,255,.25), inset 0 0 0 1px rgba(255,255,255,.06);
}
.intro-btn:hover{ background:rgba(255,255,255,.3); transform:translateY(-1px) scale(1.04); }

@media (max-width:560px){ .intro-title{font-size:36px;} }

/* ========== 페이드인 시퀀스 ========== */
.intro-content { text-align:center; }

.intro-title,
.intro-btn{
  opacity: 0;
  transform: translateY(8px);
  animation: fadeUp .9s ease forwards;
}

/* 등장 타이밍: 제목 먼저, 버튼 나중 */
.intro-title{ animation-delay: .6s; }
.intro-btn  { animation-delay: 1.5s; }

/* 살짝 반짝이는 버튼 펄스(선택) */
.intro-btn{
  position: relative;
  will-change: transform, box-shadow;
  animation:
    fadeUp .9s ease forwards 1.2s,
    pulse 2.6s ease-in-out 2.2s infinite; /* 2.2s 후부터 은은한 펄스 */
}

/* ===== 더 화려한 글자 페이드인 ===== */
@keyframes fadeUp {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.96);
    filter: blur(8px) brightness(0.6);
    text-shadow:
      0 0 0 rgba(124,77,255,0),
      0 0 0 rgba(0,229,255,0);
  }
  40% {
    opacity: 1;
    transform: translateY(-4px) scale(1.04);
    filter: blur(2px) brightness(1.2);
    text-shadow:
      0 0 20px rgba(124,77,255,0.35),
      0 0 36px rgba(0,229,255,0.25),
      0 0 64px rgba(255,255,255,0.15);
  }
  70% {
    transform: translateY(0) scale(1.02);
    filter: blur(1px) brightness(1.1);
    text-shadow:
      0 0 14px rgba(124,77,255,0.45),
      0 0 24px rgba(0,229,255,0.35),
      0 0 48px rgba(255,255,255,0.2);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0px) brightness(1);
    text-shadow:
      0 0 10px rgba(124,77,255,0.3),
      0 0 18px rgba(0,229,255,0.25),
      0 0 36px rgba(255,255,255,0.15);
  }
}


@keyframes pulse{
  0%{
    box-shadow:
      0 0 6px rgba(124,77,255,.4),
      0 0 18px rgba(0,229,255,.25),
      0 0 32px rgba(255,255,255,.15),
      inset 0 0 0 1px rgba(255,255,255,.06);
    transform: scale(1);
  }
  25%{
    box-shadow:
      0 0 14px rgba(124,77,255,.55),
      0 0 30px rgba(0,229,255,.4),
      0 0 48px rgba(255,255,255,.25),
      inset 0 0 2px rgba(255,255,255,.08);
    transform: scale(1.06);
  }
  50%{
    box-shadow:
      0 0 26px rgba(124,77,255,.65),
      0 0 60px rgba(0,229,255,.55),
      0 0 80px rgba(255,255,255,.35),
      inset 0 0 4px rgba(255,255,255,.12);
    transform: scale(1.1);
    filter: hue-rotate(15deg) brightness(1.25);
  }
  75%{
    box-shadow:
      0 0 18px rgba(124,77,255,.5),
      0 0 36px rgba(0,229,255,.35),
      0 0 56px rgba(255,255,255,.2),
      inset 0 0 2px rgba(255,255,255,.08);
    transform: scale(1.04);
    filter: hue-rotate(-10deg) brightness(1.1);
  }
  100%{
    box-shadow:
      0 0 6px rgba(124,77,255,.3),
      0 0 20px rgba(0,229,255,.25),
      0 0 36px rgba(255,255,255,.15),
      inset 0 0 0 1px rgba(255,255,255,.06);
    transform: scale(1);
    filter: hue-rotate(0deg) brightness(1);
  }
}


</style>

<script>
/* ========= Settings ========= */
const MAIN_URL = "./메인페이지.html";   // ← 파일명/경로 맞게 수정
const LINE_COUNT = 180;                  // 네온 라인 개수
const BLOB_COUNT = 7;                    // 파동 블롭 개수
const TRAIL_FADE = 0.12;                 // 잔상 농도 (0~1, 낮을수록 잔상 길어짐)
const LINE_MAX_SPEED = 3;                // 라인 속도 상한
const LINE_WIDTH_MINMAX = [1.2, 3.0];    // 라인 두께 범위

/* ========= Canvas Boot ========= */
const canvas = document.getElementById("motionCanvas");
const ctx = canvas.getContext("2d");
let w, h, dpr, lines = [], blobs = [];

function resize(){
  dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1)); // 성능-품질 균형
  w = canvas.width  = Math.floor(innerWidth  * dpr);
  h = canvas.height = Math.floor(innerHeight * dpr);
  canvas.style.width  = innerWidth + "px";
  canvas.style.height = innerHeight + "px";
}
addEventListener("resize", resize);
resize();

/* ========= Helpers ========= */
const rand = (a,b)=> a + Math.random()*(b-a);
const choice = (arr)=> arr[Math.floor(Math.random()*arr.length)];

/* ========= Blobs (오로라 느낌의 파동 원형) ========= */
class Blob {
  constructor(){
    this.reset(true);
  }
  reset(first=false){
    this.x = rand(0, w);
    this.y = rand(0, h);
    const base = Math.min(w,h);
    this.baseR = rand(base*0.10, base*0.22);          // 기본 반지름
    this.amp   = this.baseR * rand(0.08, 0.18);       // 파동 진폭
    this.speed = rand(0.6, 1.2) / 60;                 // 파동 속도
    this.phase = Math.random()*Math.PI*2;
    this.hue   = rand(0, 360);                        // 색
    this.alpha = first ? 0.35 : rand(0.24, 0.38);     // 투명도
    this.drift = { vx: rand(-0.3,0.3), vy: rand(-0.25,0.25) }; // 천천히 표류
  }
  update(){
    this.phase += this.speed;
    this.x += this.drift.vx * dpr;
    this.y += this.drift.vy * dpr;
    // 화면 밖으로 너무 나가면 위치 리세트
    if (this.x < -this.baseR || this.x > w + this.baseR ||
        this.y < -this.baseR || this.y > h + this.baseR){
      this.reset();
      this.x = Math.min(Math.max(this.x, this.baseR), w - this.baseR);
      this.y = Math.min(Math.max(this.y, this.baseR), h - this.baseR);
    }
  }
  draw(ctx){
    const r = this.baseR + Math.sin(this.phase)*this.amp; // 파동 반경
    const g = ctx.createRadialGradient(this.x, this.y, r*0.15, this.x, this.y, r);
    // 컬러 스톱 (중앙 빛 → 가장자리로 사라짐)
    g.addColorStop(0.00, `hsla(${this.hue},100%,60%,${this.alpha})`);
    g.addColorStop(0.45, `hsla(${this.hue},100%,60%,${this.alpha*0.35})`);
    g.addColorStop(1.00, `hsla(${this.hue},100%,60%,0)`);
    ctx.fillStyle = g;
    ctx.beginPath();
    ctx.arc(this.x, this.y, r, 0, Math.PI*2);
    ctx.fill();
  }
}

/* ========= Neon Lines (휘몰아치는 스트로크) ========= */
class Line {
  constructor(){
    this.reset(true);
  }
  reset(first=false){
    this.x = rand(0, w);
    this.y = rand(0, h);
    // 속도 벡터
    this.vx = (Math.random()-0.5) * LINE_MAX_SPEED * dpr;
    this.vy = (Math.random()-0.5) * LINE_MAX_SPEED * dpr;
    this.alpha = rand(0.15, 0.95);
    this.hue = rand(0, 360);
    this.life = Math.floor(rand(100, 260));
    this.width = rand(LINE_WIDTH_MINMAX[0], LINE_WIDTH_MINMAX[1]) * dpr;
    if (first) this.life = Math.floor(rand(140, 280));
  }
  update(){
    this.x += this.vx;
    this.y += this.vy;
    this.life--;
    // 화면을 벗어나면 반사
    if (this.x < 0 || this.x > w) this.vx *= -1;
    if (this.y < 0 || this.y > h) this.vy *= -1;
    if (this.life <= 0) this.reset();
  }
  draw(ctx){
    ctx.globalAlpha = this.alpha;
    ctx.strokeStyle = `hsl(${this.hue},100%,60%)`;
    ctx.lineWidth = this.width;
    ctx.beginPath();
    ctx.moveTo(this.x, this.y);
    ctx.lineTo(this.x - this.vx*8, this.y - this.vy*8);
    ctx.stroke();
  }
}

/* ========= Init ========= */
for (let i=0; i<BLOB_COUNT; i++) blobs.push(new Blob());
for (let i=0; i<LINE_COUNT; i++) lines.push(new Line());

/* ========= Loop ========= */
function animate(){
  // 잔상 페이드
  ctx.globalCompositeOperation = "source-over";
  ctx.fillStyle = `rgba(0,0,0,${TRAIL_FADE})`;
  ctx.fillRect(0,0,w,h);

  // 1) 파동 블롭 (발광 합성)
  ctx.globalCompositeOperation = "lighter";
  for (const b of blobs){ b.update(); b.draw(ctx); }

  // 2) 네온 라인 (발광 합성 유지하면 더 화려함)
  for (const ln of lines){ ln.update(); ln.draw(ctx); }

  requestAnimationFrame(animate);
}
animate();

/* ========= Enter Button ========= */
const intro = document.getElementById("intro");
const enterBtn = document.getElementById("enterBtn");
enterBtn.addEventListener("click", ()=>{
  intro.classList.add("hidden");
  setTimeout(()=>{ window.location.href = MAIN_URL; }, 420);
});
</script>
